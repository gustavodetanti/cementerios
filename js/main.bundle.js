(()=>{function p(o,t){let n=o.querySelector(".subslidesLine"),l=t?t.querySelector("img"):null,i=[...n.children],d=0,e=i.length;if(i[0].classList.add("opened"),e<2)return;n.style.width=window.innerWidth*e+1+"px";let a=document.createElement("div"),c=document.createElement("div");a.classList.add("leftBut"),c.classList.add("rightBut"),a.innerHTML="&lt;",c.innerHTML="&gt;",o.appendChild(a),o.appendChild(c),a.addEventListener("click",u),c.addEventListener("click",r);function r(s){s&&s.preventDefault(),d++,d>=e&&(d=0),f()}function u(s){s&&s.preventDefault(),d--,d<0&&(d=e-1),f()}function f(){l&&d==0,i.map((s,g)=>{g==d?s.classList.add("opened"):s.classList.remove("opened")})}}function h(o,t,n,l){let i=new FormData;if(l&&n)i.append("com",l),i.append("data",JSON.stringify(n)),fetch(o,{body:i,method:"post"}).then(e=>e.json()).then(e=>{t&&t(e)}).catch(e=>{console.log(e),t&&t({error:"error de datos leyendo "+o})});else if(n){for(var d in n)i.append(d,n[d]);fetch(o,{body:i,method:"post"}).then(e=>e.json()).then(e=>{t&&t(e)}).catch(e=>{console.log(e),t&&t({error:"error de datos leyendo "+o})})}else fetch(o).then(e=>e.json()).then(e=>{t&&t(e)}).catch(e=>{console.log(e),t&&t({error:"error de datos leyendo "+o})})}var m=!1,v;window.addEventListener("DOMContentLoaded",o=>{v=document.getElementById("js-app"),w(),h("json/main.json",t=>S(t))});function S(o){console.log(o.sections);let t="";o.sections.map((l,i)=>{t+=`<a data-n='${i}' >${l.title}</a> `});let n=document.createElement("nav");n.innerHTML=t,document.querySelector("header").appendChild(n)}function w(){let o,t=[...document.querySelectorAll(".slider > div")],n=0,l=t.length;t.map(r=>{let u=r.querySelector(".subslides");u&&p(u,r)});let i=document.getElementById("prevSection"),d=document.getElementById("nextSection");i.addEventListener("click",a),d.addEventListener("click",e),c();function e(){n++,n>=l&&(n=0),c()}function a(){n--,n<0&&(n=l-1),c()}function c(){t.map((r,u)=>{u==n?r.classList.add("opened"):r.classList.remove("opened")}),m&&(clearTimeout(o),o=setTimeout(()=>{e()},4e3))}}})();
